<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Cosmetic Page Generator</title>

	<script type="module">
		import { generateSourceReleaseHTML } from '/tools/source-settings-templates.js';
		
		window.addEventListener('DOMContentLoaded', () => {
			const container = document.getElementById('source-release-container');
			if (container) {
				const sources = ['itemShop', 'battlePass', 'fortniteCrew', 'ogPass', 'musicPass', 'legoPass', 'questReward', 'rocketPass'];
				container.innerHTML = generateSourceReleaseHTML(sources);

				document.dispatchEvent(new CustomEvent('sourceControlsReady'));
			}
		}, { once: true });
	</script>
	
	<script src="./scripts/cosmetic-page-generator.js" type="module"></script>
	<script src="/scripts/pageinfo.js" type="module"></script>
	<script src="/scripts/load-site-notices.js" type="module"></script>

	<link rel="stylesheet" href="./styles/styles.css" />
	<style>
		.featured-characters-controls { margin-bottom: 6px; }
		.featured-characters-controls button { padding: 0.25rem 0.5rem; }

		#featured-characters-list.scrollbox { max-height: 300px; overflow-y: auto; padding: 0px 8px; }

		.featured-character-entry { position: relative; }
		.featured-character-entry input[type="text"] { width: 100%; padding: 6px; box-sizing: border-box; }
		.featured-character-entry .suggestions { position: relative; margin-top: 4px; max-height: 120px; overflow-y: auto; }
		.featured-character-entry .suggestions div { padding: 6px; cursor: pointer; }

		/* Categories section styling */
		#categories-dropdown { padding: 6px; width: 100%; max-width: 300px; margin-bottom: 0.5rem; }
		#selected-categories { display: flex; flex-wrap: wrap; gap: 0.5rem; min-height: 40px; padding: 0.5rem; background: rgba(0,0,0,0.2); border-radius: 4px; }
		.category-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: #2a2a2a; color: #fff; padding: 0.4rem 0.6rem; border-radius: 4px; font-size: 0.9rem; }
		.category-badge .remove-category { cursor: pointer; font-weight: bold; opacity: 0.7; transition: opacity 0.2s; }
		.category-badge .remove-category:hover { opacity: 1; }
		#selected-categories:empty::before { content: 'No categories selected'; color: #888; font-style: italic; }
	</style>
	<link rel="icon" href="https://static.wikia.nocookie.net/fortnite/images/4/4a/Site-favicon.ico" />
</head>

<body>
	<header>
		<a href="/index.html" id="return-main">
			<span>
				<img src="/files/images/return-icon.png" alt="back" />
			</span>
		</a>
		<img src="https://static.wikia.nocookie.net/fortnite/images/d/dc/Schematic_-_Icon_-_Save_the_World.png" alt="logo" />
		<span style="margin-right: 1rem">
			<h1 class="name">Cosmetic Page Generator</h1>
			<span class="version"></span>
		</span>
	</header>

	<div id="wrapper">
		<main>
			<section id="cosmetic-search-section">
				<h3>Cosmetic Search</h3>
				<input type="text" id="cosmetic-display" placeholder="Enter cosmetic ID or Name" autocomplete="off" />
				<input type="hidden" id="cosmetic-input" />
				<input type="hidden" id="cosmetic-input-name" />
				<div id="suggestions"></div>
			</section>

		<section id="source-release-container">
			<!-- Source and release controls will be injected here -->
		</section>

		<section>
			<div class="two-column-layout">
					<div class="column">
						<h4>Other</h4>
						<div class="inline-group">
							<label class="checkbox-label">
								<input type="checkbox" id="display-title" name="source">
								<b>Add display title?</b>
							</label>
						</div>
						<div class="inline-group">
							<label class="checkbox-label">
								<input type="checkbox" id="collaboration" name="source">
								Collaboration?
							</label>
						</div>
						<label class="checkbox-label">
							<input type="checkbox" id="has-renders" name="source">
							Has renders?
						</label>
						<div class="inline-group">
							<label for="remix-of">Is a remix of:</label>
							<input type="text" id="remix-of" style="padding: 0.25rem !important">
						</div>
						<div class="inline-group" id="rocket-league-field" style="display: none">
							<label class="checkbox-label">
								<input type="checkbox" id="rocket-league-cosmetic" name="source">
								Rocket League Cosmetic?
							</label>
							<label class="checkbox-label" id="rocket-league-exclusive-field" style="margin-left: 2em; display: none">
								<input type="checkbox" id="rocket-league-exclusive" name="source">
								Exclusive?
							</label>
						</div>

					</div>

					<div class="column">
						<h4>Categories</h4>
						<select id="categories-dropdown">
							<option value="">Select a category to add...</option>
						</select>
						<div id="selected-categories"></div>
					</div>
				</div>
			</section>

			<button class="sec-subm" id="generate-btn">Generate Page</button>
			<div id="status" class="status hidden"></div>
		</main>
		
		<aside>
			<section>
				<div class="title-box">
					<h3>Generated Page:</h3>
				</div>
				<textarea id="output" readonly placeholder="Generated MediaWiki page content will appear here..."></textarea>
				<button class="sec-subm" id="copy-btn" disabled>Copy to Clipboard</button>
				<button class="sec-subm secondary" id="clear-btn">Clear</button>
				<br>
				<button class="sec-subm" id="wiki-page-btn" disabled>Create page</button>
			</section>
		</aside>
	</div>
</body>
</html>